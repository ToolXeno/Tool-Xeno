<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Word Counter Tool - Tool Xeno</title>
    <meta name="description" content="Professional word counter tool with character analysis, reading time estimation, and writing quality metrics - advanced text analysis with modern design.">

    <!-- ‚úÖ Tool Xeno Favicons -->
<link rel="icon" type="image/svg+xml" href="toolxeno-logo.svg">
<link rel="alternate icon" type="image/png" href="toolxeno-logo.png">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="toolxeno-logo.png">
<meta name="theme-color" content="#667eea">

    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            
            --dark-bg: #0a0a0a;
            --dark-surface: #1a1a1a;
            --dark-surface-elevated: #252525;
            --dark-text: #ffffff;
            --dark-text-secondary: #a0a0a0;
            --dark-border: #333333;
            
            --light-bg: #f8fafc;
            --light-surface: #ffffff;
            --light-surface-elevated: #f1f5f9;
            --light-text: #1e293b;
            --light-text-secondary: #64748b;
            --light-border: #e2e8f0;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            transition: background-color 0.35s cubic-bezier(0.4, 0, 0.2, 1), color 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.6;
            background-color: var(--dark-bg);
            color: var(--dark-text);
            min-height: 100vh;
        }
        
        body.light-theme { 
            background-color: var(--light-bg); 
            color: var(--light-text); 
        }

        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            animation: float 20s infinite linear;
            opacity: 0.05;
            background: radial-gradient(circle, #667eea 0%, transparent 70%);
        }
        
        body.light-theme .particle { 
            background: radial-gradient(circle, #4facfe 0%, transparent 70%); 
        }
        
        @keyframes float { 
            0% { transform: translateY(100vh) rotate(0deg); } 
            100% { transform: translateY(-100px) rotate(360deg); } 
        }
        
        .header-glass {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: background-color 0.35s ease, border-color 0.35s ease;
        }
        
        body.light-theme .header-glass { 
            background: rgba(255, 255, 255, 0.9); 
            border-bottom-color: rgba(0, 0, 0, 0.1); 
        }
        
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--dark-surface);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .theme-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 22px;
            height: 22px;
            background: var(--primary-gradient);
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        body.light-theme .theme-toggle { 
            background: var(--light-surface-elevated); 
            border-color: var(--light-border); 
        }
        
        body.light-theme .theme-toggle::after { 
            transform: translateX(28px); 
            background: var(--secondary-gradient); 
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.35s ease, border-color 0.35s ease;
            position: relative;
            overflow: hidden;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }
        
        body.light-theme .glass-card { 
            background-color: rgba(255, 255, 255, 0.9); 
            border-color: rgba(0, 0, 0, 0.1); 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); 
        }
        
        .btn-gradient {
            background: var(--primary-gradient);
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-gradient:hover::before { left: 100%; }
        .btn-gradient:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); 
        }
        .btn-gradient:active { transform: translateY(0); }
        
        .btn-secondary {
            background: var(--accent-gradient);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        }
        
        .btn-success {
            background: var(--success-gradient);
            box-shadow: 0 4px 15px rgba(17, 153, 142, 0.3);
        }
        
        .btn-success:hover {
            box-shadow: 0 8px 25px rgba(17, 153, 142, 0.4);
        }
        
        .nav-link {
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s ease, color 0.3s ease;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
        }
        
        .nav-link:hover { 
            background: rgba(255, 255, 255, 0.1); 
            color: white; 
        }
        
        body.light-theme .nav-link { 
            color: rgba(0, 0, 0, 0.7); 
        }
        
        body.light-theme .nav-link:hover { 
            background: rgba(0, 0, 0, 0.1); 
            color: black; 
        }
        
        .text-area {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            min-height: 400px;
            resize: vertical;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: var(--dark-text);
            transition: all 0.3s ease;
        }
        
        .text-area:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        body.light-theme .text-area {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.1);
            color: var(--light-text);
        }
        
        body.light-theme .text-area:focus {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        body.light-theme .stat-card {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
            width: 120px;
            height: 120px;
        }
        
        .progress-ring-circle {
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 8;
            fill: transparent;
            r: 52;
            cx: 60;
            cy: 60;
        }
        
        .progress-ring-progress {
            stroke-width: 8;
            fill: transparent;
            r: 52;
            cx: 60;
            cy: 60;
            stroke-dasharray: 326.73;
            stroke-dashoffset: 326.73;
            transition: stroke-dashoffset 0.5s ease-in-out;
            stroke: url(#gradient);
        }
        
        .readability-meter {
            position: relative;
            margin: 20px 0;
        }
        
        .readability-bar {
            height: 10px;
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            border-radius: 5px;
            position: relative;
        }
        
        .readability-indicator {
            position: absolute;
            top: -5px;
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid var(--primary-gradient);
            border-radius: 50%;
            transform: translateX(-50%);
            transition: left 0.3s ease;
        }
        
        .keyword-list {
            max-height: 300px;
            overflow-y: auto;
            padding: 10px 0;
        }
        
        .keyword-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 4px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .keyword-item {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .keyword-item:hover {
            background: rgba(102, 126, 234, 0.1);
        }
        
        .keyword-bar {
            height: 4px;
            background: var(--primary-gradient);
            border-radius: 2px;
            margin-top: 4px;
            transition: width 0.3s ease;
        }
        
        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .text-area {
                min-height: 300px;
            }
        }
    </style>
</head>

<body>
    <!-- Floating Particles -->
    <div class="particles-container" id="particles"></div>
    
    <!-- Header -->
    <header class="header-glass fixed w-full top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                        Tool Xeno
                    </div>
                    <div class="hidden md:block text-sm opacity-70">
                        Professional Word Counter
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <nav class="hidden md:flex space-x-2">
                        <a href="#analyze" class="nav-link">Analyze</a>
                        <a href="#statistics" class="nav-link">Statistics</a>
                        <a href="#keywords" class="nav-link">Keywords</a>
                    </nav>
                    <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()"></div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="pt-20 pb-10">
        <!-- Hero Section -->
        <section class="container mx-auto px-6 py-16 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent">
                Professional Word Counter
            </h1>
            <p class="text-lg md:text-xl mb-8 opacity-80 max-w-3xl mx-auto">
                Advanced text analysis with real-time word counting, readability assessment, keyword density analysis, 
                and comprehensive writing quality metrics for professional content creators.
            </p>
        </section>
        
        <!-- Main Analysis Interface -->
        <section id="analyze" class="container mx-auto px-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Text Input Panel -->
                <div class="lg:col-span-2">
                    <div class="glass-card p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xl font-semibold flex items-center">
                                <i class="fas fa-edit mr-3"></i>
                                Text Analysis
                            </h3>
                            <div class="flex gap-3">
                                <button id="clearBtn" class="btn-secondary px-4 py-2 text-sm">
                                    <i class="fas fa-trash mr-2"></i>
                                    Clear
                                </button>
                                <button id="exportBtn" class="btn-success px-4 py-2 text-sm">
                                    <i class="fas fa-download mr-2"></i>
                                    Export
                                </button>
                            </div>
                        </div>
                        
                        <textarea 
                            id="textInput" 
                            class="text-area" 
                            placeholder="Start typing or paste your text here to get instant analysis including word count, character count, reading time, readability score, and keyword density..."
                        ></textarea>
                        
                        <div class="mt-6 flex flex-wrap gap-4 text-sm opacity-70">
                            <div>üí° Real-time analysis as you type</div>
                            <div>üìä SEO keyword density tracking</div>
                            <div>üìñ Reading difficulty assessment</div>
                            <div>‚è±Ô∏è Estimated reading time</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Stats Panel -->
                <div class="space-y-6">
                    <!-- Real-time Stats -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-6 flex items-center">
                            <i class="fas fa-tachometer-alt mr-3"></i>
                            Live Statistics
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="stat-card">
                                <div class="stat-value" id="wordCount">0</div>
                                <div class="text-sm opacity-70">Words</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value" id="charCount">0</div>
                                <div class="text-sm opacity-70">Characters</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value" id="charNoSpaceCount">0</div>
                                <div class="text-sm opacity-70">Characters (no spaces)</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value" id="sentenceCount">0</div>
                                <div class="text-sm opacity-70">Sentences</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value" id="paragraphCount">0</div>
                                <div class="text-sm opacity-70">Paragraphs</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reading Time -->
                    <div class="glass-card p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-clock mr-3"></i>
                            Reading Time
                        </h3>
                        
                        <div class="text-center">
                            <svg class="progress-ring mx-auto">
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#667eea" />
                                        <stop offset="100%" style="stop-color:#764ba2" />
                                    </linearGradient>
                                </defs>
                                <circle class="progress-ring-circle"></circle>
                                <circle class="progress-ring-progress" id="readingProgress"></circle>
                            </svg>
                            <div class="mt-4">
                                <div class="text-2xl font-bold" id="readingTime">0 min</div>
                                <div class="text-sm opacity-70">Avg. reading speed</div>
                                <div class="text-xs opacity-50 mt-1" id="readingSpeed">250 words/min</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Detailed Statistics -->
        <section id="statistics" class="container mx-auto px-6 mt-12">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Writing Quality Metrics -->
                <div class="glass-card p-6">
                    <h3 class="text-xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-chart-line mr-3"></i>
                        Writing Quality Metrics
                    </h3>
                    
                    <div class="stats-grid mb-6">
                        <div class="stat-card">
                            <div class="stat-value" id="avgWordsPerSentence">0</div>
                            <div class="text-sm opacity-70">Avg Words/Sentence</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="avgSentencesPerParagraph">0</div>
                            <div class="text-sm opacity-70">Avg Sentences/Paragraph</div>
                        </div>
                    </div>
                    
                    <!-- Readability Score -->
                    <div class="readability-meter">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-medium">Readability Score</span>
                            <span id="readabilityScore" class="font-bold">0</span>
                        </div>
                        <div class="readability-bar">
                            <div class="readability-indicator" id="readabilityIndicator"></div>
                        </div>
                        <div class="flex justify-between text-xs opacity-70 mt-1">
                            <span>Hard</span>
                            <span>Medium</span>
                            <span>Easy</span>
                        </div>
                        <div class="text-center mt-2">
                            <div id="readabilityLevel" class="text-sm font-medium">Not analyzed</div>
                        </div>
                    </div>
                    
                    <!-- Text Complexity Chart -->
                    <div class="chart-container">
                        <canvas id="complexityChart"></canvas>
                    </div>
                </div>
                
                <!-- Keyword Analysis -->
                <div class="glass-card p-6">
                    <h3 class="text-xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-key mr-3"></i>
                        Keyword Density Analysis
                    </h3>
                    
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium">Top Keywords</span>
                            <span class="text-xs opacity-70">Density %</span>
                        </div>
                    </div>
                    
                    <div class="keyword-list" id="keywordList">
                        <div class="text-center opacity-50 py-8">
                            <i class="fas fa-search text-2xl mb-2"></i>
                            <div>Start typing to see keyword analysis</div>
                        </div>
                    </div>
                    
                    <!-- Word Length Distribution -->
                    <div class="mt-6">
                        <h4 class="font-medium mb-3">Word Length Distribution</h4>
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="wordLengthChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Advanced Analytics -->
        <section class="container mx-auto px-6 mt-12">
            <div class="glass-card p-6">
                <h3 class="text-xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-analytics mr-3"></i>
                    Advanced Text Analytics
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="stat-card">
                        <div class="stat-value" id="uniqueWords">0</div>
                        <div class="text-sm opacity-70">Unique Words</div>
                        <div class="text-xs opacity-50 mt-1">Vocabulary diversity</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="lexicalDiversity">0%</div>
                        <div class="text-sm opacity-70">Lexical Diversity</div>
                        <div class="text-xs opacity-50 mt-1">Unique/Total ratio</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="avgWordLength">0</div>
                        <div class="text-sm opacity-70">Avg Word Length</div>
                        <div class="text-xs opacity-50 mt-1">Characters per word</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="textComplexity">Basic</div>
                        <div class="text-sm opacity-70">Text Complexity</div>
                        <div class="text-xs opacity-50 mt-1">Overall assessment</div>
                    </div>
                </div>
                
                <!-- Keyword Frequency Chart -->
                <div class="mt-8">
                    <h4 class="font-medium mb-4">Most Frequent Words</h4>
                    <div class="chart-container">
                        <canvas id="frequencyChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="container mx-auto px-6 py-8 mt-12 border-t border-opacity-10">
        <div class="text-center opacity-70">
            <p>&copy; 2025 Tool Xeno. Professional Word Counter Tool with Advanced Analytics.</p>
            <p class="text-sm mt-2">Real-time text analysis | SEO optimization | Writing quality assessment</p>
        </div>
    </footer>
    
    <script>
        // Global variables
        let textAnalysis = {
            words: 0,
            characters: 0,
            charactersNoSpaces: 0,
            sentences: 0,
            paragraphs: 0,
            readingTime: 0,
            keywords: {},
            wordLengths: {},
            uniqueWords: new Set(),
            avgWordsPerSentence: 0,
            avgSentencesPerParagraph: 0,
            readabilityScore: 0,
            lexicalDiversity: 0,
            avgWordLength: 0
        };
        
        let charts = {
            complexity: null,
            wordLength: null,
            frequency: null
        };
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeParticles();
            initializeEventListeners();
            initializeCharts();
            loadSavedText();
        });
        
        // Theme toggle
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            localStorage.setItem('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
            updateChartsTheme();
        }
        
        // Load saved theme
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-theme');
        }
        
        // Initialize floating particles
        function initializeParticles() {
            const container = document.getElementById('particles');
            const particleCount = 15;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 10 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                container.appendChild(particle);
            }
        }
        
        // Initialize event listeners
        function initializeEventListeners() {
            const textInput = document.getElementById('textInput');
            
            textInput.addEventListener('input', debounce(analyzeText, 300));
            textInput.addEventListener('paste', () => setTimeout(analyzeText, 100));
            
            document.getElementById('clearBtn').addEventListener('click', clearText);
            document.getElementById('exportBtn').addEventListener('click', exportResults);
        }
        
        // Initialize charts
        function initializeCharts() {
            const isDark = !document.body.classList.contains('light-theme');
            const textColor = isDark ? '#ffffff' : '#1e293b';
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            
            // Complexity Chart
            const complexityCtx = document.getElementById('complexityChart').getContext('2d');
            charts.complexity = new Chart(complexityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Simple Words', 'Complex Words', 'Very Complex'],
                    datasets: [{
                        data: [70, 25, 5],
                        backgroundColor: [
                            'rgba(17, 153, 142, 0.8)',
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(245, 158, 11, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: textColor }
                        }
                    }
                }
            });
            
            // Word Length Chart
            const wordLengthCtx = document.getElementById('wordLengthChart').getContext('2d');
            charts.wordLength = new Chart(wordLengthCtx, {
                type: 'bar',
                data: {
                    labels: ['1-3', '4-6', '7-9', '10+'],
                    datasets: [{
                        label: 'Word Count',
                        data: [0, 0, 0, 0],
                        backgroundColor: 'rgba(102, 126, 234, 0.6)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: textColor },
                            grid: { color: gridColor }
                        },
                        x: {
                            ticks: { color: textColor },
                            grid: { color: gridColor }
                        }
                    },
                    plugins: {
                        legend: { labels: { color: textColor } }
                    }
                }
            });
            
            // Frequency Chart
            const frequencyCtx = document.getElementById('frequencyChart').getContext('2d');
            charts.frequency = new Chart(frequencyCtx, {
                type: 'horizontalBar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Frequency',
                        data: [],
                        backgroundColor: 'rgba(79, 172, 254, 0.6)',
                        borderColor: 'rgba(79, 172, 254, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: textColor },
                            grid: { color: gridColor }
                        },
                        x: {
                            ticks: { color: textColor },
                            grid: { color: gridColor }
                        }
                    },
                    plugins: {
                        legend: { labels: { color: textColor } }
                    }
                }
            });
        }
        
        // Update charts theme
        function updateChartsTheme() {
            const isDark = !document.body.classList.contains('light-theme');
            const textColor = isDark ? '#ffffff' : '#1e293b';
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            
            Object.values(charts).forEach(chart => {
                if (chart && chart.options) {
                    if (chart.options.scales) {
                        if (chart.options.scales.y) {
                            chart.options.scales.y.ticks.color = textColor;
                            chart.options.scales.y.grid.color = gridColor;
                        }
                        if (chart.options.scales.x) {
                            chart.options.scales.x.ticks.color = textColor;
                            chart.options.scales.x.grid.color = gridColor;
                        }
                    }
                    if (chart.options.plugins && chart.options.plugins.legend) {
                        chart.options.plugins.legend.labels.color = textColor;
                    }
                    chart.update();
                }
            });
        }
        
        // Analyze text
        function analyzeText() {
            const text = document.getElementById('textInput').value;
            
            if (!text.trim()) {
                resetAnalysis();
                return;
            }
            
            // Basic counts
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
            
            textAnalysis.words = words.length;
            textAnalysis.characters = text.length;
            textAnalysis.charactersNoSpaces = text.replace(/\s/g, '').length;
            textAnalysis.sentences = sentences.length;
            textAnalysis.paragraphs = Math.max(paragraphs.length, 1);
            
            // Calculate advanced metrics
            calculateAdvancedMetrics(words, sentences);
            
            // Update keyword analysis
            analyzeKeywords(words);
            
            // Calculate readability
            calculateReadability(words, sentences);
            
            // Update UI
            updateUI();
            updateCharts();
            
            // Save text to localStorage
            localStorage.setItem('wordCounterText', text);
        }
        
        // Calculate advanced metrics
        function calculateAdvancedMetrics(words, sentences) {
            textAnalysis.uniqueWords = new Set(words.map(w => w.toLowerCase().replace(/[^\w]/g, '')));
            textAnalysis.avgWordsPerSentence = textAnalysis.sentences > 0 ? (textAnalysis.words / textAnalysis.sentences).toFixed(1) : 0;
            textAnalysis.avgSentencesPerParagraph = textAnalysis.paragraphs > 0 ? (textAnalysis.sentences / textAnalysis.paragraphs).toFixed(1) : 0;
            textAnalysis.lexicalDiversity = textAnalysis.words > 0 ? (textAnalysis.uniqueWords.size / textAnalysis.words * 100).toFixed(1) : 0;
            
            // Calculate average word length
            const totalLength = words.reduce((sum, word) => sum + word.replace(/[^\w]/g, '').length, 0);
            textAnalysis.avgWordLength = words.length > 0 ? (totalLength / words.length).toFixed(1) : 0;
            
            // Reading time (average 250 words per minute)
            textAnalysis.readingTime = Math.ceil(textAnalysis.words / 250);
            
            // Word length distribution
            textAnalysis.wordLengths = { '1-3': 0, '4-6': 0, '7-9': 0, '10+': 0 };
            words.forEach(word => {
                const cleanWord = word.replace(/[^\w]/g, '');
                const length = cleanWord.length;
                if (length <= 3) textAnalysis.wordLengths['1-3']++;
                else if (length <= 6) textAnalysis.wordLengths['4-6']++;
                else if (length <= 9) textAnalysis.wordLengths['7-9']++;
                else textAnalysis.wordLengths['10+']++;
            });
        }
        
        // Analyze keywords
        function analyzeKeywords(words) {
            const stopWords = new Set(['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'could', 'should', 'may', 'might', 'must', 'can', 'this', 'that', 'these', 'those', 'i', 'you', 'he', 'she', 'it', 'we', 'they', 'me', 'him', 'her', 'us', 'them']);
            
            textAnalysis.keywords = {};
            
            words.forEach(word => {
                const cleanWord = word.toLowerCase().replace(/[^\w]/g, '');
                if (cleanWord.length > 2 && !stopWords.has(cleanWord)) {
                    textAnalysis.keywords[cleanWord] = (textAnalysis.keywords[cleanWord] || 0) + 1;
                }
            });
        }
        
        // Calculate readability score (simplified Flesch Reading Ease)
        function calculateReadability(words, sentences) {
            if (textAnalysis.words === 0 || textAnalysis.sentences === 0) {
                textAnalysis.readabilityScore = 0;
                return;
            }
            
            const avgSentenceLength = textAnalysis.words / textAnalysis.sentences;
            const avgSyllables = calculateAvgSyllables(words);
            
            // Simplified Flesch Reading Ease formula
            textAnalysis.readabilityScore = Math.max(0, Math.min(100, 
                206.835 - (1.015 * avgSentenceLength) - (84.6 * avgSyllables)
            ));
        }
        
        // Calculate average syllables per word (approximation)
        function calculateAvgSyllables(words) {
            let totalSyllables = 0;
            
            words.forEach(word => {
                const cleanWord = word.toLowerCase().replace(/[^\w]/g, '');
                let syllables = cleanWord.match(/[aeiouy]+/g) || [];
                syllables = Math.max(1, syllables.length);
                totalSyllables += syllables;
            });
            
            return words.length > 0 ? totalSyllables / words.length : 0;
        }
        
        // Update UI
        function updateUI() {
            document.getElementById('wordCount').textContent = textAnalysis.words.toLocaleString();
            document.getElementById('charCount').textContent = textAnalysis.characters.toLocaleString();
            document.getElementById('charNoSpaceCount').textContent = textAnalysis.charactersNoSpaces.toLocaleString();
            document.getElementById('sentenceCount').textContent = textAnalysis.sentences.toLocaleString();
            document.getElementById('paragraphCount').textContent = textAnalysis.paragraphs.toLocaleString();
            
            document.getElementById('avgWordsPerSentence').textContent = textAnalysis.avgWordsPerSentence;
            document.getElementById('avgSentencesPerParagraph').textContent = textAnalysis.avgSentencesPerParagraph;
            document.getElementById('uniqueWords').textContent = textAnalysis.uniqueWords.size.toLocaleString();
            document.getElementById('lexicalDiversity').textContent = textAnalysis.lexicalDiversity + '%';
            document.getElementById('avgWordLength').textContent = textAnalysis.avgWordLength;
            
            // Reading time
            const readingTimeText = textAnalysis.readingTime === 1 ? '1 min' : `${textAnalysis.readingTime} mins`;
            document.getElementById('readingTime').textContent = readingTimeText;
            
            // Update reading progress ring
            const maxTime = 20; // Max display time in minutes
            const progress = Math.min(textAnalysis.readingTime / maxTime, 1);
            const circumference = 2 * Math.PI * 52;
            const offset = circumference - (progress * circumference);
            document.getElementById('readingProgress').style.strokeDashoffset = offset;
            
            // Readability
            document.getElementById('readabilityScore').textContent = Math.round(textAnalysis.readabilityScore);
            updateReadabilityIndicator();
            
            // Text complexity
            let complexity = 'Basic';
            if (textAnalysis.avgWordLength > 6 || textAnalysis.avgWordsPerSentence > 20) {
                complexity = 'Advanced';
            } else if (textAnalysis.avgWordLength > 4 || textAnalysis.avgWordsPerSentence > 15) {
                complexity = 'Intermediate';
            }
            document.getElementById('textComplexity').textContent = complexity;
            
            // Update keyword list
            updateKeywordList();
        }
        
        // Update readability indicator
        function updateReadabilityIndicator() {
            const indicator = document.getElementById('readabilityIndicator');
            const level = document.getElementById('readabilityLevel');
            
            const score = textAnalysis.readabilityScore;
            const percentage = Math.min(Math.max(score, 0), 100);
            
            indicator.style.left = percentage + '%';
            
            let levelText = 'Very Hard';
            if (score >= 90) levelText = 'Very Easy';
            else if (score >= 80) levelText = 'Easy';
            else if (score >= 70) levelText = 'Fairly Easy';
            else if (score >= 60) levelText = 'Standard';
            else if (score >= 50) levelText = 'Fairly Difficult';
            else if (score >= 30) levelText = 'Difficult';
            
            level.textContent = levelText;
        }
        
        // Update keyword list
        function updateKeywordList() {
            const keywordList = document.getElementById('keywordList');
            const sortedKeywords = Object.entries(textAnalysis.keywords)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10);
            
            if (sortedKeywords.length === 0) {
                keywordList.innerHTML = `
                    <div class="text-center opacity-50 py-8">
                        <i class="fas fa-search text-2xl mb-2"></i>
                        <div>Start typing to see keyword analysis</div>
                    </div>
                `;
                return;
            }
            
            const maxCount = sortedKeywords[0][1];
            
            keywordList.innerHTML = sortedKeywords.map(([keyword, count]) => {
                const density = ((count / textAnalysis.words) * 100).toFixed(2);
                const barWidth = (count / maxCount) * 100;
                
                return `
                    <div class="keyword-item">
                        <div class="flex-1">
                            <div class="font-medium">${keyword}</div>
                            <div class="keyword-bar" style="width: ${barWidth}%"></div>
                        </div>
                        <div class="text-right">
                            <div class="font-medium">${density}%</div>
                            <div class="text-xs opacity-70">${count} times</div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Update charts
        function updateCharts() {
            // Word length chart
            charts.wordLength.data.datasets[0].data = [
                textAnalysis.wordLengths['1-3'],
                textAnalysis.wordLengths['4-6'],
                textAnalysis.wordLengths['7-9'],
                textAnalysis.wordLengths['10+']
            ];
            charts.wordLength.update();
            
            // Frequency chart
            const topWords = Object.entries(textAnalysis.keywords)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 8);
            
            charts.frequency.data.labels = topWords.map(([word]) => word);
            charts.frequency.data.datasets[0].data = topWords.map(([,count]) => count);
            charts.frequency.update();
            
            // Complexity chart
            const simple = textAnalysis.wordLengths['1-3'] + textAnalysis.wordLengths['4-6'];
            const complex = textAnalysis.wordLengths['7-9'];
            const veryComplex = textAnalysis.wordLengths['10+'];
            const total = simple + complex + veryComplex;
            
            if (total > 0) {
                charts.complexity.data.datasets[0].data = [
                    Math.round((simple / total) * 100),
                    Math.round((complex / total) * 100),
                    Math.round((veryComplex / total) * 100)
                ];
                charts.complexity.update();
            }
        }
        
        // Reset analysis
        function resetAnalysis() {
            textAnalysis = {
                words: 0,
                characters: 0,
                charactersNoSpaces: 0,
                sentences: 0,
                paragraphs: 0,
                readingTime: 0,
                keywords: {},
                wordLengths: { '1-3': 0, '4-6': 0, '7-9': 0, '10+': 0 },
                uniqueWords: new Set(),
                avgWordsPerSentence: 0,
                avgSentencesPerParagraph: 0,
                readabilityScore: 0,
                lexicalDiversity: 0,
                avgWordLength: 0
            };
            
            updateUI();
            updateCharts();
        }
        
        // Clear text
        function clearText() {
            document.getElementById('textInput').value = '';
            localStorage.removeItem('wordCounterText');
            resetAnalysis();
        }
        
        // Export results
        function exportResults() {
            const results = {
                timestamp: new Date().toISOString(),
                text: document.getElementById('textInput').value,
                analysis: textAnalysis,
                summary: {
                    words: textAnalysis.words,
                    characters: textAnalysis.characters,
                    readingTime: textAnalysis.readingTime,
                    readabilityScore: Math.round(textAnalysis.readabilityScore),
                    topKeywords: Object.entries(textAnalysis.keywords)
                        .sort(([,a], [,b]) => b - a)
                        .slice(0, 5)
                        .map(([word, count]) => ({ word, count, density: ((count / textAnalysis.words) * 100).toFixed(2) + '%' }))
                }
            };
            
            const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `word-analysis-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // Load saved text
        function loadSavedText() {
            const savedText = localStorage.getItem('wordCounterText');
            if (savedText) {
                document.getElementById('textInput').value = savedText;
                analyzeText();
            }
        }
        
        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>
