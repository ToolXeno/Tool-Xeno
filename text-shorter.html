<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Text Shortener - Tool Xeno</title>
    <meta name="description" content="Professional text shortener with AI-powered summarization, customizable length control, keyword preservation, and multiple compression modes.">
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            
            --dark-bg: #0a0a0a;
            --dark-surface: #1a1a1a;
            --dark-surface-elevated: #252525;
            --dark-text: #ffffff;
            --dark-text-secondary: #a0a0a0;
            --dark-border: #333333;
            
            --light-bg: #f8fafc;
            --light-surface: #ffffff;
            --light-surface-elevated: #f1f5f9;
            --light-text: #1e293b;
            --light-text-secondary: #64748b;
            --light-border: #e2e8f0;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            transition: background-color 0.35s cubic-bezier(0.4, 0, 0.2, 1), color 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.6;
            background-color: var(--dark-bg);
            color: var(--dark-text);
            min-height: 100vh;
        }
        
        body.light-theme { 
            background-color: var(--light-bg); 
            color: var(--light-text); 
        }

        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            animation: float 20s infinite linear;
            opacity: 0.05;
            background: radial-gradient(circle, #667eea 0%, transparent 70%);
        }
        
        body.light-theme .particle { 
            background: radial-gradient(circle, #4facfe 0%, transparent 70%); 
        }
        
        @keyframes float { 
            0% { transform: translateY(100vh) rotate(0deg); } 
            100% { transform: translateY(-100px) rotate(360deg); } 
        }
        
        .header-glass {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: background-color 0.35s ease, border-color 0.35s ease;
        }
        
        body.light-theme .header-glass { 
            background: rgba(255, 255, 255, 0.9); 
            border-bottom-color: rgba(0, 0, 0, 0.1); 
        }
        
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--dark-surface);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .theme-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 22px;
            height: 22px;
            background: var(--primary-gradient);
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        body.light-theme .theme-toggle { 
            background: var(--light-surface-elevated); 
            border-color: var(--light-border); 
        }
        
        body.light-theme .theme-toggle::after { 
            transform: translateX(28px); 
            background: var(--secondary-gradient); 
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.35s ease, border-color 0.35s ease;
            position: relative;
            overflow: hidden;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }
        
        body.light-theme .glass-card { 
            background-color: rgba(255, 255, 255, 0.9); 
            border-color: rgba(0, 0, 0, 0.1); 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); 
        }
        
        .btn-gradient {
            background: var(--primary-gradient);
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-gradient:hover::before { left: 100%; }
        .btn-gradient:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); 
        }
        .btn-gradient:active { transform: translateY(0); }
        
        .btn-secondary {
            background: var(--accent-gradient);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        }
        
        .btn-success {
            background: var(--success-gradient);
            box-shadow: 0 4px 15px rgba(17, 153, 142, 0.3);
        }
        
        .btn-success:hover {
            box-shadow: 0 8px 25px rgba(17, 153, 142, 0.4);
        }
        
        .nav-link {
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s ease, color 0.3s ease;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
        }
        
        .nav-link:hover { 
            background: rgba(255, 255, 255, 0.1); 
            color: white; 
        }
        
        body.light-theme .nav-link { 
            color: rgba(0, 0, 0, 0.7); 
        }
        
        body.light-theme .nav-link:hover { 
            background: rgba(0, 0, 0, 0.1); 
            color: black; 
        }
        
        .text-area {
            width: 100%;
            min-height: 200px;
            resize: vertical;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--dark-text);
            font-family: inherit;
            font-size: 16px;
            line-height: 1.6;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .text-area:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }
        
        body.light-theme .text-area {
            background: rgba(0, 0, 0, 0.05);
            color: var(--light-text);
            border-color: var(--light-border);
        }
        
        .slider-container {
            position: relative;
            width: 100%;
            margin: 20px 0;
        }
        
        .range-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            transition: all 0.3s ease;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-gradient);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .range-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-gradient);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        body.light-theme .stat-card {
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }
        
        .mode-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .mode-option {
            padding: 10px 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 14px;
        }
        
        .mode-option.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        body.light-theme .mode-option {
            border-color: rgba(0, 0, 0, 0.2);
        }
        
        body.light-theme .mode-option.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active {
            background: var(--primary-gradient);
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-switch.active::after {
            transform: translateX(25px);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--success-gradient);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .keyword-tag {
            display: inline-block;
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin: 2px;
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .mode-selector {
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <!-- Floating Particles -->
    <div class="particles-container" id="particles"></div>
    
    <!-- Header -->
    <header class="header-glass fixed w-full top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                        Tool Xeno
                    </div>
                    <div class="hidden md:block text-sm opacity-70">
                        Professional Text Shortener
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <nav class="hidden md:flex space-x-2">
                        <a href="#shorten" class="nav-link">Shorten</a>
                        <a href="#modes" class="nav-link">Modes</a>
                        <a href="#settings" class="nav-link">Settings</a>
                    </nav>
                    <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()"></div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="pt-20 pb-10">
        <!-- Hero Section -->
        <section class="container mx-auto px-6 py-16 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent">
                Professional Text Shortener
            </h1>
            <p class="text-lg md:text-xl mb-8 opacity-80 max-w-3xl mx-auto">
                Advanced text summarization with AI-powered algorithms, customizable length control, 
                keyword preservation, and multiple compression modes for perfect content optimization.
            </p>
        </section>
        
        <!-- Main Interface -->
        <section id="shorten" class="container mx-auto px-6">
            <!-- Input Section -->
            <div class="glass-card p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-semibold flex items-center">
                        <i class="fas fa-compress-alt mr-3"></i>
                        Text Input
                    </h3>
                    <button id="pasteBtn" class="btn-secondary">
                        <i class="fas fa-clipboard mr-2"></i>
                        Paste
                    </button>
                </div>
                
                <textarea 
                    id="inputText" 
                    class="text-area" 
                    placeholder="Enter or paste your long text here... The tool will analyze and shorten it while preserving the key information and meaning."
                    oninput="analyzeText()"
                ></textarea>
                
                <!-- Quick Actions -->
                <div class="flex flex-wrap gap-3 mt-4">
                    <button id="clearBtn" class="btn-gradient">
                        <i class="fas fa-trash mr-2"></i>
                        Clear
                    </button>
                    <button id="loadSampleBtn" class="btn-secondary">
                        <i class="fas fa-file-text mr-2"></i>
                        Load Sample
                    </button>
                </div>
            </div>
            
            <!-- Settings & Output Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Settings Panel -->
                <div class="glass-card p-6">
                    <h3 class="text-xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-cogs mr-3"></i>
                        Shortening Settings
                    </h3>
                    
                    <!-- Shortening Mode -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-3">Shortening Mode</label>
                        <div class="mode-selector">
                            <div class="mode-option active" data-mode="extractive">
                                <i class="fas fa-list mr-2"></i>Extractive
                            </div>
                            <div class="mode-option" data-mode="abstractive">
                                <i class="fas fa-brain mr-2"></i>Abstractive
                            </div>
                            <div class="mode-option" data-mode="keyword">
                                <i class="fas fa-key mr-2"></i>Keyword Focus
                            </div>
                        </div>
                    </div>
                    
                    <!-- Length Control -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-3">
                            <label class="text-sm font-medium">Target Length</label>
                            <span id="lengthValue" class="text-lg font-bold text-purple-400">50%</span>
                        </div>
                        <input type="range" id="lengthSlider" class="range-slider" min="20" max="80" value="50">
                        <div class="flex justify-between text-xs opacity-70 mt-1">
                            <span>Very Short</span>
                            <span>Moderate</span>
                            <span>Detailed</span>
                        </div>
                    </div>
                    
                    <!-- Advanced Options -->
                    <div class="space-y-4 mb-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <label class="text-sm font-medium">Preserve Keywords</label>
                                <p class="text-xs opacity-70">Keep important terms</p>
                            </div>
                            <div class="toggle-switch active" data-option="keywords"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div>
                                <label class="text-sm font-medium">Maintain Structure</label>
                                <p class="text-xs opacity-70">Keep original flow</p>
                            </div>
                            <div class="toggle-switch active" data-option="structure"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div>
                                <label class="text-sm font-medium">Smart Compression</label>
                                <p class="text-xs opacity-70">AI-optimized reduction</p>
                            </div>
                            <div class="toggle-switch active" data-option="smart"></div>
                        </div>
                    </div>
                    
                    <!-- Action Button -->
                    <button id="shortenBtn" class="btn-gradient w-full pulse-animation" disabled>
                        <i class="fas fa-magic mr-2"></i>
                        Shorten Text
                    </button>
                </div>
                
                <!-- Output Panel -->
                <div class="glass-card p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold flex items-center">
                            <i class="fas fa-eye mr-3"></i>
                            Shortened Result
                        </h3>
                        <button id="copyBtn" class="btn-success" style="display: none;">
                            <i class="fas fa-copy mr-2"></i>
                            Copy Result
                        </button>
                    </div>
                    
                    <div id="outputContainer" class="min-h-[200px] flex items-center justify-center opacity-50">
                        <div class="text-center">
                            <i class="fas fa-file-alt text-4xl mb-4"></i>
                            <p>Your shortened text will appear here</p>
                        </div>
                    </div>
                    
                    <textarea id="outputText" class="text-area hidden" readonly></textarea>
                    
                    <!-- Processing Status -->
                    <div id="processingStatus" class="hidden mt-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">Processing...</span>
                            <span id="progressText">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                    
                    <!-- Keywords Preview -->
                    <div id="keywordsContainer" class="hidden mt-4">
                        <label class="text-sm font-medium mb-2 block">Preserved Keywords</label>
                        <div id="keywordsList" class="flex flex-wrap"></div>
                    </div>
                </div>
            </div>
            
            <!-- Statistics Section -->
            <div class="glass-card p-8 mt-8">
                <h3 class="text-xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-chart-line mr-3"></i>
                    Compression Statistics
                </h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="originalWords">0</div>
                        <div class="text-sm opacity-70">Original Words</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="shortenedWords">0</div>
                        <div class="text-sm opacity-70">Shortened Words</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="compressionRatio">0%</div>
                        <div class="text-sm opacity-70">Compression Ratio</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="readingTime">0 min</div>
                        <div class="text-sm opacity-70">Reading Time Saved</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sentences">0</div>
                        <div class="text-sm opacity-70">Sentences</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="characters">0</div>
                        <div class="text-sm opacity-70">Characters</div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="container mx-auto px-6 py-8 text-center opacity-70">
        <p>&copy; 2025 Tool Xeno. Professional Text Shortener Tool.</p>
    </footer>
    
    <script>
        // Global variables
        let currentText = '';
        let shortenedText = '';
        let settings = {
            mode: 'extractive',
            length: 50,
            preserveKeywords: true,
            maintainStructure: true,
            smartCompression: true
        };
        
        // Sample text for demo
        const sampleText = `Artificial Intelligence (AI) has revolutionized numerous industries and transformed the way we live, work, and interact with technology. From healthcare and finance to transportation and entertainment, AI applications have become increasingly sophisticated and widespread. Machine learning algorithms can now process vast amounts of data to identify patterns, make predictions, and automate complex tasks that once required human intelligence. Natural language processing enables computers to understand and generate human language, while computer vision allows machines to interpret visual information. The rapid advancement of AI technologies has also raised important questions about ethics, privacy, job displacement, and the future of human-machine collaboration. As we continue to develop more powerful AI systems, it becomes crucial to establish guidelines and frameworks that ensure responsible development and deployment of these technologies. The potential benefits of AI are immense, including improved healthcare outcomes, enhanced cybersecurity, more efficient resource management, and breakthrough scientific discoveries. However, we must also address the challenges and risks associated with AI implementation to create a future where artificial intelligence serves humanity's best interests while preserving human values and autonomy.`;
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeParticles();
            initializeControls();
            setupEventListeners();
        });
        
        // Theme toggle
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            localStorage.setItem('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
        }
        
        // Load saved theme
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-theme');
        }
        
        // Initialize floating particles
        function initializeParticles() {
            const container = document.getElementById('particles');
            const particleCount = 15;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 10 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                container.appendChild(particle);
            }
        }
        
        // Initialize controls
        function initializeControls() {
            // Mode selection
            document.querySelectorAll('.mode-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.mode-option').forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    settings.mode = option.dataset.mode;
                });
            });
            
            // Length slider
            const lengthSlider = document.getElementById('lengthSlider');
            const lengthValue = document.getElementById('lengthValue');
            
            lengthSlider.addEventListener('input', () => {
                settings.length = parseInt(lengthSlider.value);
                lengthValue.textContent = settings.length + '%';
            });
            
            // Toggle switches
            document.querySelectorAll('.toggle-switch').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    toggle.classList.toggle('active');
                    const option = toggle.dataset.option;
                    settings[option === 'keywords' ? 'preserveKeywords' : 
                            option === 'structure' ? 'maintainStructure' : 'smartCompression'] = 
                            toggle.classList.contains('active');
                });
            });
        }
        
        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('pasteBtn').addEventListener('click', pasteFromClipboard);
            document.getElementById('clearBtn').addEventListener('click', clearText);
            document.getElementById('loadSampleBtn').addEventListener('click', loadSample);
            document.getElementById('shortenBtn').addEventListener('click', shortenText);
            document.getElementById('copyBtn').addEventListener('click', copyResult);
        }
        
        // Paste from clipboard
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('inputText').value = text;
                analyzeText();
            } catch (err) {
                console.error('Failed to paste:', err);
            }
        }
        
        // Clear text
        function clearText() {
            document.getElementById('inputText').value = '';
            document.getElementById('outputText').value = '';
            document.getElementById('outputContainer').innerHTML = `
                <div class="text-center opacity-50">
                    <i class="fas fa-file-alt text-4xl mb-4"></i>
                    <p>Your shortened text will appear here</p>
                </div>
            `;
            document.getElementById('copyBtn').style.display = 'none';
            document.getElementById('keywordsContainer').classList.add('hidden');
            currentText = '';
            shortenedText = '';
            updateStatistics();
        }
        
        // Load sample text
        function loadSample() {
            document.getElementById('inputText').value = sampleText;
            analyzeText();
        }
        
        // Analyze input text
        function analyzeText() {
            currentText = document.getElementById('inputText').value;
            const shortenBtn = document.getElementById('shortenBtn');
            
            if (currentText.trim().length > 50) {
                shortenBtn.disabled = false;
                shortenBtn.classList.add('pulse-animation');
            } else {
                shortenBtn.disabled = true;
                shortenBtn.classList.remove('pulse-animation');
            }
            
            updateStatistics();
        }
        
        // Shorten text
        async function shortenText() {
            if (!currentText.trim()) return;
            
            showProcessingStatus();
            
            // Simulate processing with progress
            await simulateProcessing();
            
            // Apply shortening algorithm
            shortenedText = applyShorteningAlgorithm(currentText);
            
            // Display result
            displayResult();
            hideProcessingStatus();
        }
        
        // Show processing status
        function showProcessingStatus() {
            const status = document.getElementById('processingStatus');
            status.classList.remove('hidden');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) progress = 90;
                
                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressText').textContent = Math.round(progress) + '%';
                
                if (progress >= 90) {
                    clearInterval(interval);
                }
            }, 100);
        }
        
        // Hide processing status
        function hideProcessingStatus() {
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = '100%';
            
            setTimeout(() => {
                document.getElementById('processingStatus').classList.add('hidden');
            }, 500);
        }
        
        // Simulate processing delay
        function simulateProcessing() {
            return new Promise(resolve => {
                setTimeout(resolve, 2000 + Math.random() * 1000);
            });
        }
        
        // Apply shortening algorithm
        function applyShorteningAlgorithm(text) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const targetLength = Math.ceil(sentences.length * (settings.length / 100));
            
            let result = '';
            
            switch (settings.mode) {
                case 'extractive':
                    result = extractiveSummarization(sentences, targetLength);
                    break;
                case 'abstractive':
                    result = abstractiveSummarization(sentences, targetLength);
                    break;
                case 'keyword':
                    result = keywordBasedSummarization(sentences, targetLength);
                    break;
            }
            
            if (settings.smartCompression) {
                result = applySmartCompression(result);
            }
            
            return result.trim();
        }
        
        // Extractive summarization
        function extractiveSummarization(sentences, targetLength) {
            // Score sentences based on word frequency and position
            const wordFreq = {};
            const allWords = sentences.join(' ').toLowerCase().split(/\W+/);
            
            allWords.forEach(word => {
                if (word.length > 3) {
                    wordFreq[word] = (wordFreq[word] || 0) + 1;
                }
            });
            
            const scoredSentences = sentences.map((sentence, index) => {
                const words = sentence.toLowerCase().split(/\W+/);
                let score = 0;
                
                words.forEach(word => {
                    if (wordFreq[word]) {
                        score += wordFreq[word];
                    }
                });
                
                // Boost score for early sentences
                if (index < sentences.length * 0.3) score *= 1.5;
                
                return { sentence: sentence.trim(), score, index };
            });
            
            return scoredSentences
                .sort((a, b) => b.score - a.score)
                .slice(0, targetLength)
                .sort((a, b) => a.index - b.index)
                .map(s => s.sentence)
                .join('. ') + '.';
        }
        
        // Abstractive summarization (simplified)
        function abstractiveSummarization(sentences, targetLength) {
            const keyPoints = extractKeyPoints(sentences);
            const compressed = keyPoints.slice(0, targetLength);
            
            return compressed.map(point => {
                // Simplify sentence structure
                return point.replace(/\b(very|really|quite|rather|extremely)\s+/gi, '')
                          .replace(/\b(in order to|for the purpose of)\b/gi, 'to')
                          .replace(/\b(due to the fact that|because of the fact that)\b/gi, 'because');
            }).join('. ') + '.';
        }
        
        // Keyword-based summarization
        function keywordBasedSummarization(sentences, targetLength) {
            const keywords = extractKeywords(sentences.join(' '));
            
            const keywordSentences = sentences.filter(sentence => {
                const sentenceWords = sentence.toLowerCase().split(/\W+/);
                return keywords.some(keyword => 
                    sentenceWords.some(word => word.includes(keyword) || keyword.includes(word))
                );
            });
            
            if (settings.preserveKeywords) {
                displayKeywords(keywords);
            }
            
            return keywordSentences.slice(0, targetLength).join('. ') + '.';
        }
        
        // Extract key points
        function extractKeyPoints(sentences) {
            return sentences.filter(sentence => {
                const words = sentence.split(' ');
                return words.length >= 8 && words.length <= 25; // Medium length sentences
            });
        }
        
        // Extract keywords
        function extractKeywords(text) {
            const words = text.toLowerCase().split(/\W+/);
            const stopwords = ['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'this', 'that', 'these', 'those', 'is', 'are', 'was', 'were', 'be', 'been', 'have', 'has', 'had', 'will', 'would', 'could', 'should'];
            
            const wordCount = {};
            words.forEach(word => {
                if (word.length > 3 && !stopwords.includes(word)) {
                    wordCount[word] = (wordCount[word] || 0) + 1;
                }
            });
            
            return Object.entries(wordCount)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 8)
                .map(([word]) => word);
        }
        
        // Apply smart compression
        function applySmartCompression(text) {
            return text
                .replace(/\b(in addition|furthermore|moreover)\b/gi, 'also')
                .replace(/\b(as a result|consequently|therefore)\b/gi, 'so')
                .replace(/\b(it is important to note that|it should be mentioned that)\b/gi, '')
                .replace(/\s+/g, ' ')
                .trim();
        }
        
        // Display keywords
        function displayKeywords(keywords) {
            const container = document.getElementById('keywordsContainer');
            const list = document.getElementById('keywordsList');
            
            list.innerHTML = keywords.map(keyword => 
                `<span class="keyword-tag">${keyword}</span>`
            ).join('');
            
            container.classList.remove('hidden');
        }
        
        // Display result
        function displayResult() {
            const outputContainer = document.getElementById('outputContainer');
            const outputText = document.getElementById('outputText');
            
            outputContainer.classList.add('hidden');
            outputText.classList.remove('hidden');
            outputText.value = shortenedText;
            
            document.getElementById('copyBtn').style.display = 'block';
            
            updateStatistics();
        }
        
        // Copy result
        async function copyResult() {
            try {
                await navigator.clipboard.writeText(shortenedText);
                const btn = document.getElementById('copyBtn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check mr-2"></i>Copied!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }
        
        // Update statistics
        function updateStatistics() {
            const originalWords = currentText ? currentText.split(/\s+/).filter(w => w.length > 0).length : 0;
            const shortenedWords = shortenedText ? shortenedText.split(/\s+/).filter(w => w.length > 0).length : 0;
            const compressionRatio = originalWords > 0 ? Math.round(((originalWords - shortenedWords) / originalWords) * 100) : 0;
            const originalTime = Math.round(originalWords / 200); // 200 words per minute
            const shortenedTime = Math.round(shortenedWords / 200);
            const timeSaved = originalTime - shortenedTime;
            
            document.getElementById('originalWords').textContent = originalWords;
            document.getElementById('shortenedWords').textContent = shortenedWords;
            document.getElementById('compressionRatio').textContent = compressionRatio + '%';
            document.getElementById('readingTime').textContent = Math.max(0, timeSaved) + ' min';
            
            const sentences = currentText ? currentText.split(/[.!?]+/).filter(s => s.trim().length > 0).length : 0;
            const characters = currentText ? currentText.length : 0;
            
            document.getElementById('sentences').textContent = sentences;
            document.getElementById('characters').textContent = characters.toLocaleString();
        }
    </script>
</body>
</html>
